(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{2959:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return LeafletMap}});var r=n(7437),s=n(2265);function createLeafletContext(e){return Object.freeze({__version:1,map:e})}function extendContext(e,t){return Object.freeze({...e,...t})}let l=(0,s.createContext)(null),a=l.Provider;function useLeafletContext(){let e=(0,s.useContext)(l);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var i=n(447),o=n.n(i);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function MapContainerComponent({bounds:e,boundsOptions:t,center:n,children:r,className:l,id:o,placeholder:c,style:d,whenReady:u,zoom:m,...x},f){let[h]=(0,s.useState)({className:l,id:o,style:d}),[g,p]=(0,s.useState)(null);(0,s.useImperativeHandle)(f,()=>g?.map??null,[g]);let y=(0,s.useCallback)(r=>{if(null!==r&&null===g){let s=new i.Map(r,x);null!=n&&null!=m?s.setView(n,m):null!=e&&s.fitBounds(e,t),null!=u&&s.whenReady(u),p(createLeafletContext(s))}},[]);(0,s.useEffect)(()=>()=>{g?.map.remove()},[g]);let v=g?s.createElement(a,{value:g},r):c??null;return s.createElement("div",_extends({},h,{ref:y}),v)}let c=(0,s.forwardRef)(MapContainerComponent);function component_createContainerComponent(e){function ContainerComponent(t,n){let{instance:r,context:l}=e(t).current;return(0,s.useImperativeHandle)(n,()=>r),null==t.children?null:s.createElement(a,{value:l},t.children)}return(0,s.forwardRef)(ContainerComponent)}function component_createLeafComponent(e){function LeafComponent(t,n){let{instance:r}=e(t).current;return(0,s.useImperativeHandle)(n,()=>r),null}return(0,s.forwardRef)(LeafComponent)}function element_createElementObject(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function element_createElementHook(e,t){return null==t?function(t,n){let r=(0,s.useRef)();return r.current||(r.current=e(t,n)),r}:function(n,r){let l=(0,s.useRef)();l.current||(l.current=e(n,r));let a=(0,s.useRef)(n),{instance:i}=l.current;return(0,s.useEffect)(function(){a.current!==n&&(t(i,n,a.current),a.current=n)},[i,n,r]),l}}function useAttribution(e,t){let n=(0,s.useRef)(t);(0,s.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function useEventHandlers(e,t){let n=(0,s.useRef)();(0,s.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function withPane(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function useLayerLifecycle(e,t){(0,s.useEffect)(function(){let n=t.layerContainer??t.map;return n.addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function layer_createLayerHook(e){return function(t){let n=useLeafletContext(),r=e(withPane(t,n),n);return useAttribution(n.map,t.attribution),useEventHandlers(r.current,t.eventHandlers),useLayerLifecycle(r.current,n),r}}function usePathOptions(e,t){let n=(0,s.useRef)();(0,s.useEffect)(function(){if(t.pathOptions!==n.current){let r=t.pathOptions??{};e.instance.setStyle(r),n.current=r}},[e,t])}function createPathHook(e){return function(t){let n=useLeafletContext(),r=e(withPane(t,n),n);return useEventHandlers(r.current,t.eventHandlers),useLayerLifecycle(r.current,n),usePathOptions(r.current,t),r}}function createPathComponent(e,t){let n=element_createElementHook(e,t),r=createPathHook(n);return component_createContainerComponent(r)}function createTileLayerComponent(e,t){let n=element_createElementHook(e,t),r=layer_createLayerHook(n);return component_createLeafComponent(r)}function updateGridLayer(e,t,n){let{opacity:r,zIndex:s}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=s&&s!==n.zIndex&&e.setZIndex(s)}n(4887);let d=createTileLayerComponent(function({url:e,...t},n){let r=new i.TileLayer(e,withPane(t,n));return element_createElementObject(r,n)},function(e,t,n){updateGridLayer(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)}),u=createPathComponent(function({data:e,...t},n){let r=new i.GeoJSON(e,t);return element_createElementObject(r,extendContext(n,{overlayContainer:r}))},function(e,t,n){t.style!==n.style&&(null==t.style?e.resetStyle():e.setStyle(t.style))});function TimeSeriesChart(e){let{data:t}=e,[n,l]=(0,s.useState)([]),{historical:a,forecast:i,country:o}=t,c=[...a,...i],d=Math.min(...c),u=Math.max(...c)-d,m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=a.length+i.length;(0,s.useEffect)(()=>{let e=0,t=setInterval(()=>{e<c.length?(l(c.slice(0,e+1)),e++):clearInterval(t)},100);return()=>clearInterval(t)},[t]);let getY=e=>180-140*((e-d)/u),getX=e=>40+e*(400/(x-1)),f=a.map((e,t)=>{let n=getX(t),r=getY(e);return 0===t?"M ".concat(n," ").concat(r):"L ".concat(n," ").concat(r)}).join(" "),h=i.map((e,t)=>{let n=getX(a.length+t),r=getY(e);return 0===t?"M ".concat(getX(a.length-1)," ").concat(getY(a[a.length-1])):"L ".concat(n," ").concat(r)}).join(" ");return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:["Risk Forecast: ",o]}),(0,r.jsxs)("svg",{width:"480",height:"220",className:"w-full h-auto",children:[(0,r.jsx)("defs",{children:(0,r.jsx)("pattern",{id:"grid",width:"40",height:"20",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 40 0 L 0 0 0 20",fill:"none",stroke:"#f3f4f6",strokeWidth:"1"})})}),(0,r.jsx)("rect",{width:"480",height:"220",fill:"url(#grid)"}),(0,r.jsx)("line",{x1:"40",y1:"20",x2:"40",y2:"200",stroke:"#e5e7eb",strokeWidth:"1"}),(0,r.jsx)("line",{x1:"40",y1:"200",x2:"440",y2:"200",stroke:"#e5e7eb",strokeWidth:"1"}),[0,25,50,75,100].map(e=>{let t=getY(e);return(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:"35",y1:t,x2:"40",y2:t,stroke:"#9ca3af",strokeWidth:"1"}),(0,r.jsx)("text",{x:"30",y:t+4,textAnchor:"end",className:"text-xs fill-gray-500",children:e})]},e)}),(0,r.jsx)("line",{x1:getX(a.length-1),y1:"20",x2:getX(a.length-1),y2:"200",stroke:"#fbbf24",strokeWidth:"2",strokeDasharray:"4,4",opacity:"0.7"}),(0,r.jsx)("path",{d:f,fill:"none",stroke:"#1e40af",strokeWidth:"2",className:"transition-all duration-300"}),(0,r.jsx)("path",{d:h,fill:"none",stroke:"#1e40af",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.8",className:"transition-all duration-300"}),n.map((e,t)=>{let n=getX(t),s=getY(e),l=t>=a.length;return(0,r.jsx)("circle",{cx:n,cy:s,r:l?3:4,fill:"#1e40af",stroke:"white",strokeWidth:"2",className:"cursor-pointer hover:r-6 transition-all duration-200",children:(0,r.jsx)("title",{children:"".concat(m[t%12],": ").concat(e)})},t)}),(0,r.jsxs)("g",{transform:"translate(300, 30)",children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"140",height:"50",fill:"white",stroke:"#e5e7eb",rx:"4"}),(0,r.jsx)("line",{x1:"10",y1:"15",x2:"30",y2:"15",stroke:"#1e40af",strokeWidth:"2"}),(0,r.jsx)("text",{x:"35",y:"19",className:"text-xs fill-gray-700",children:"Historical"}),(0,r.jsx)("line",{x1:"10",y1:"35",x2:"30",y2:"35",stroke:"#1e40af",strokeWidth:"2",strokeDasharray:"3,3"}),(0,r.jsx)("text",{x:"35",y:"39",className:"text-xs fill-gray-700",children:"Forecast"})]}),(0,r.jsx)("text",{x:getX(a.length-1),y:"15",textAnchor:"middle",className:"text-xs fill-orange-600 font-medium",children:"Now"})]}),(0,r.jsx)("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"6-month historical trend and 5-month forecast"})]})}n(1374),delete o().Icon.Default.prototype._getIconUrl,o().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});let m={AFG:{name:"Afghanistan",risk:85,level:"Very High",trend:[82,84,86,85,87,85],forecast:[85,83,81,78,76],drivers:["Political instability","Economic crisis","Security concerns"],confidence:.92},SYR:{name:"Syria",risk:78,level:"Very High",trend:[85,82,80,78,76,78],forecast:[78,75,72,70,68],drivers:["Ongoing conflict","Economic sanctions","Refugee crisis"],confidence:.88},YEM:{name:"Yemen",risk:82,level:"Very High",trend:[88,85,84,82,80,82],forecast:[82,80,78,75,73],drivers:["Civil war","Humanitarian crisis","Economic collapse"],confidence:.9},UKR:{name:"Ukraine",risk:70,level:"High",trend:[45,52,68,75,72,70],forecast:[70,68,65,62,58],drivers:["Armed conflict","Territorial disputes","Economic pressure"],confidence:.95},USA:{name:"United States",risk:25,level:"Low",trend:[22,24,26,28,26,25],forecast:[25,23,22,20,19],drivers:["Political polarization","Social tensions","Economic inequality"],confidence:.85},CHN:{name:"China",risk:30,level:"Low",trend:[28,29,31,32,31,30],forecast:[30,29,28,27,26],drivers:["Economic slowdown","Social control","Regional tensions"],confidence:.82},RUS:{name:"Russia",risk:55,level:"Medium",trend:[48,52,58,62,58,55],forecast:[55,53,50,48,45],drivers:["International sanctions","Economic pressure","Political tensions"],confidence:.87},IND:{name:"India",risk:45,level:"Medium",trend:[42,43,46,48,47,45],forecast:[45,43,41,39,37],drivers:["Border tensions","Internal security","Economic challenges"],confidence:.83}},getRiskColor=e=>e>=75?"#8B0000":e>=60?"#DC143C":e>=45?"#FF6347":e>=30?"#FFA500":"#90EE90";function LeafletMap(){let[e,t]=(0,s.useState)(null),[n,l]=(0,s.useState)(null),[a,i]=(0,s.useState)(!0),[x,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{let loadGeoJsonData=async()=>{try{var e;console.log("Loading GeoJSON data...");let n=await fetch("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson");if(!n.ok)throw Error("Failed to fetch country boundaries");let r=await n.json();console.log("GeoJSON data loaded, features count:",null===(e=r.features)||void 0===e?void 0:e.length),t(r),i(!1)}catch(e){console.error("Error loading GeoJSON:",e),f(e instanceof Error?e.message:"Failed to load country data"),i(!1)}};loadGeoJsonData()},[]);let getCountryCode=e=>{let t=e.properties.name||e.properties.NAME||"";return({Afghanistan:"AFG",Syria:"SYR",Yemen:"YEM",Ukraine:"UKR","United States":"USA",China:"CHN",Russia:"RUS",India:"IND"})[t]||t};return x?(0,r.jsx)("div",{className:"w-full h-[600px] bg-gray-50 rounded-lg border border-gray-200 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-500 mb-4",children:(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"Failed to load interactive map"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:x}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Retry"})]})}):a?(0,r.jsx)("div",{className:"w-full h-[600px] bg-gray-50 rounded-lg border border-gray-200 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-500/20 rounded-full mx-auto mb-4"})}),(0,r.jsx)("p",{className:"text-gray-500 font-light",children:"Loading interactive world map..."})]})}):(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)("div",{className:"w-full h-[600px] rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:(0,r.jsxs)(c,{center:[20,0],zoom:2,minZoom:1,maxZoom:10,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[(0,r.jsx)(d,{attribution:'\xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",subdomains:"abcd"}),e&&(0,r.jsx)(u,{data:e,style:e=>{let t=getCountryCode(e),n=m[t],r=n?getRiskColor(n.risk):"#e5e7eb";return{fillColor:r,weight:1,opacity:1,color:"#ffffff",fillOpacity:.7}},onEachFeature:(e,t)=>{let n=e.properties.name||e.properties.NAME||"Unknown Country",r=getCountryCode(e),s=m[r];t.on({mouseover:e=>{let t=e.target,n=s?getRiskColor(s.risk):"#60a5fa";t.setStyle({weight:2,color:"#ffffff",fillOpacity:.8,fillColor:n,filter:"brightness(1.2)"}),t.bringToFront()},mouseout:e=>{let t=s?getRiskColor(s.risk):"#e5e7eb";e.target.setStyle({fillColor:t,weight:1,opacity:1,color:"#ffffff",fillOpacity:.7})},click:e=>{l(s?r:n),o().popup().setLatLng(e.latlng).setContent('\n            <div style="padding: 12px; min-width: 200px;">\n              <h3 style="font-weight: 600; font-size: 18px; margin-bottom: 8px; color: #1f2937;">'.concat(n,"</h3>\n              ").concat(s?'\n                <p style="color: '.concat(getRiskColor(s.risk),'; font-weight: 600; margin-bottom: 8px;">\n                  Risk Level: ').concat(s.level," (").concat(s.risk,"/100)\n                </p>\n              "):"",'\n              <p style="color: #6b7280; font-size: 14px; margin-bottom: 12px;">\n                ').concat(s?"Click to view detailed analysis below":"More info coming soon...",'\n              </p>\n              <div style="font-size: 12px; color: #9ca3af;">\n                <p>Click anywhere on the map to close this popup</p>\n              </div>\n            </div>\n          ')).openOn(e.target._map)}})}})]})}),(0,r.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-sm border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Risk Level"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:"#8B0000"}}),(0,r.jsx)("span",{children:"Very High (75+)"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:"#DC143C"}}),(0,r.jsx)("span",{children:"High (60-74)"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:"#FF6347"}}),(0,r.jsx)("span",{children:"Medium (45-59)"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:"#FFA500"}}),(0,r.jsx)("span",{children:"Low (30-44)"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:"#90EE90"}}),(0,r.jsx)("span",{children:"Very Low (<30)"})]})]})]}),(0,r.jsxs)("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-sm border border-gray-200 min-w-48",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:n?"Country Details":"Global Overview"}),n&&m[n]?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Country"}),(0,r.jsx)("div",{className:"font-medium",children:m[n].name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Risk Score"}),(0,r.jsxs)("div",{className:"font-medium",children:[m[n].risk,"/100"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Risk Level"}),(0,r.jsx)("div",{className:"font-medium",style:{color:getRiskColor(m[n].risk)},children:m[n].level})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 pt-2",children:"Click country to deselect"})]}):n?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Country"}),(0,r.jsx)("div",{className:"font-medium",children:n})]}),(0,r.jsx)("div",{className:"text-xs text-gray-600 pt-2",children:"More information coming soon..."})]}):(0,r.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsx)("div",{children:"Active Monitoring: 195 countries"}),(0,r.jsxs)("div",{children:["High Risk Areas: ",Object.values(m).filter(e=>e.risk>=60).length]}),(0,r.jsx)("div",{children:"Last Updated: Live"}),(0,r.jsx)("div",{className:"pt-2 text-blue-600",children:"Click any country for details"})]})]}),n&&m[n]&&(0,r.jsxs)("div",{className:"mt-6 bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:[m[n].name," - Detailed Analysis"]}),(0,r.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{children:(0,r.jsx)(TimeSeriesChart,{data:{historical:m[n].trend,forecast:m[n].forecast,country:m[n].name}})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Current Risk Score"}),(0,r.jsx)("div",{className:"text-2xl font-bold",style:{color:getRiskColor(m[n].risk)},children:m[n].risk})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:"".concat(m[n].risk,"%"),backgroundColor:getRiskColor(m[n].risk)}})}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:["Risk Level: ",m[n].level]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Model Confidence"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-blue-600",children:[(100*m[n].confidence).toFixed(0),"%"]}),(0,r.jsx)("div",{className:"ml-3 flex-1",children:(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(100*m[n].confidence,"%")}})})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Key Risk Drivers"}),(0,r.jsx)("div",{className:"space-y-2",children:m[n].drivers.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-3"}),(0,r.jsx)("span",{children:e})]},t))})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"5-Month Outlook"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:m[n].forecast[4]<m[n].risk?(0,r.jsxs)("span",{className:"text-green-600",children:["↓ Risk expected to decrease to ",m[n].forecast[4],"(",Math.round(m[n].risk-m[n].forecast[4])," point decline)"]}):(0,r.jsxs)("span",{className:"text-red-600",children:["↑ Risk expected to increase to ",m[n].forecast[4],"(",Math.round(m[n].forecast[4]-m[n].risk)," point increase)"]})})]})]})]})]})]})}},1374:function(){}}]);